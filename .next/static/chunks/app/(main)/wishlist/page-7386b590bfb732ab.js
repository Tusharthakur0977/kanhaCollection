(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[615],{150:(e,t,s)=>{"use strict";s.d(t,{default:()=>h});var a=s(5155),i=s(2115),l=s(63),r=s(5239),n=s(3457),d=s(1360),c=s(512),o=s(8839),u=s(6910);function h(){let{user:e}=(0,o.A)(),t=(0,l.useRouter)(),[s,h]=(0,i.useState)([]),[m,x]=(0,i.useState)(!0),p=(0,u.S)();(0,i.useEffect)(()=>{if(!e)return void t.push("/auth");y()},[e]);let y=async()=>{if(!e)return;let{data:t}=await p.from("wishlist_items").select("\n        *,\n        product:products(*)\n      ").eq("user_id",e.id);t&&h(t),x(!1)},g=async e=>{await p.from("wishlist_items").delete().eq("id",e),y()},v=async t=>{let{data:s}=await p.from("cart_items").select("*").eq("user_id",e.id).eq("product_id",t).single();s?await p.from("cart_items").update({quantity:s.quantity+1,updated_at:new Date().toISOString()}).eq("id",s.id):await p.from("cart_items").insert({user_id:e.id,product_id:t,quantity:1})};return m?(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,a.jsx)("div",{className:"container mx-auto px-4",children:(0,a.jsxs)("div",{className:"text-center py-16",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-500 mx-auto"}),(0,a.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading wishlist..."})]})})}):0===s.length?(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,a.jsx)("div",{className:"container mx-auto px-4",children:(0,a.jsxs)("div",{className:"text-center py-16",children:[(0,a.jsx)(n.A,{className:"w-24 h-24 text-gray-400 mx-auto mb-6"}),(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-600 mb-4",children:"Your wishlist is empty"}),(0,a.jsx)("p",{className:"text-gray-500 mb-8",children:"Save items you love for later"}),(0,a.jsx)("a",{href:"/products",className:"bg-gradient-to-r from-orange-500 to-yellow-500 text-white px-8 py-3 rounded-full hover:from-orange-600 hover:to-yellow-600 transition-all duration-300 font-semibold",children:"Browse Products"})]})})}):(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,a.jsxs)("div",{className:"container mx-auto px-4",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-800 mb-8",children:"My Wishlist"}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8",children:s.map(e=>{var t,s,i,l,n,o,u,h;return(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-md overflow-hidden hover:shadow-lg transition-shadow",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(r.default,{src:(null==(t=e.product)?void 0:t.image)||"",alt:(null==(s=e.product)?void 0:s.name)||"",width:400,height:300,className:"w-full h-48 object-cover"}),(0,a.jsx)("button",{onClick:()=>g(e.id),className:"absolute top-3 right-3 p-2 bg-white rounded-full shadow-lg hover:bg-gray-50 transition-colors",children:(0,a.jsx)(d.A,{className:"w-4 h-4 text-red-500"})})]}),(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsx)("h3",{className:"font-semibold text-lg text-gray-800 mb-2 line-clamp-1",children:null==(i=e.product)?void 0:i.name}),(0,a.jsx)("p",{className:"text-gray-600 text-sm mb-3 line-clamp-2",children:null==(l=e.product)?void 0:l.description}),(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("span",{className:"text-2xl font-bold text-orange-600",children:["â‚¹",null==(n=e.product)?void 0:n.price.toLocaleString()]}),(0,a.jsxs)("span",{className:"text-sm text-gray-500",children:[null==(o=e.product)?void 0:o.quantity," in stock"]})]}),(0,a.jsxs)("button",{onClick:()=>v(e.product_id),disabled:(null==(u=e.product)?void 0:u.quantity)===0,className:"w-full bg-gradient-to-r from-orange-500 to-yellow-500 text-white py-2 px-4 rounded-lg hover:from-orange-600 hover:to-yellow-600 transition-all duration-300 flex items-center justify-center space-x-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,a.jsx)(c.A,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:(null==(h=e.product)?void 0:h.quantity)===0?"Out of Stock":"Add to Cart"})]})]})]},e.id)})})]})})}},512:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(5105).A)("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]])},1360:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(5105).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},3457:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(5105).A)("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]])},6910:(e,t,s)=>{"use strict";s.d(t,{S:()=>l});var a=s(5040),i=s(8760);(0,a.UU)("https://ifpvypovzipupnjjeois.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImlmcHZ5cG92emlwdXBuamplb2lzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTg2OTQ3OTgsImV4cCI6MjA3NDI3MDc5OH0.3maRUIRxrWDEkl6NmH0sRRT7SdxaZAc449UkZhon9FU");let l=()=>(0,i.createClientComponentClient)()},8690:(e,t,s)=>{Promise.resolve().then(s.bind(s,150))},8839:(e,t,s)=>{"use strict";s.d(t,{A:()=>d,Providers:()=>n});var a=s(5155),i=s(2115),l=s(6910);let r=(0,i.createContext)(void 0);function n(e){let{children:t}=e,[s,n]=(0,i.useState)(null),[d,c]=(0,i.useState)(null),[o,u]=(0,i.useState)(!0),h=(0,l.S)(),m=async()=>{if(!s)return;let{data:e}=await h.from("profiles").select("*").eq("id",s.id).single();e&&c(e)};(0,i.useEffect)(()=>{(async()=>{let{data:{user:e}}=await h.auth.getUser();n(e),e&&await m(),u(!1)})();let{data:{subscription:e}}=h.auth.onAuthStateChange(async(e,t)=>{var s;n(null!=(s=null==t?void 0:t.user)?s:null),(null==t?void 0:t.user)?await m():c(null),u(!1)});return()=>e.unsubscribe()},[]);let x=async()=>{await h.auth.signOut(),n(null),c(null)};return(0,a.jsx)(r.Provider,{value:{user:s,profile:d,loading:o,signOut:x,refreshProfile:m},children:t})}let d=()=>{let e=(0,i.useContext)(r);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}}},e=>{e.O(0,[760,946,441,255,358],()=>e(e.s=8690)),_N_E=e.O()}]);