(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[10],{1360:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(5105).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},2710:(e,t,a)=>{"use strict";a.d(t,{default:()=>x});var s=a(5155),r=a(2115),n=a(63),l=a(5239),i=a(5105);let d=(0,i.A)("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]),o=(0,i.A)("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]),c=(0,i.A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);var u=a(1360);let m=(0,i.A)("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);var h=a(8839),p=a(6910);function x(){let{user:e}=(0,h.A)(),t=(0,n.useRouter)(),[a,i]=(0,r.useState)([]),[x,g]=(0,r.useState)(!0),[v,y]=(0,r.useState)({name:"",phone:"",address:""}),f=(0,p.S)();(0,r.useEffect)(()=>{if(!e)return void t.push("/auth");b()},[e]);let b=async()=>{if(!e)return;let{data:t}=await f.from("cart_items").select("\n        *,\n        product:products(*)\n      ").eq("user_id",e.id);t&&i(t),g(!1)},j=async(e,t)=>{t<=0?await f.from("cart_items").delete().eq("id",e):await f.from("cart_items").update({quantity:t,updated_at:new Date().toISOString()}).eq("id",e),b()},N=async e=>{await f.from("cart_items").delete().eq("id",e),b()},w=async()=>{if(!v.name||!v.phone||!v.address)return void alert("Please fill in all customer information");let s=a.reduce((e,t)=>{var a;return e+((null==(a=t.product)?void 0:a.price)||0)*t.quantity},0),{data:r}=await f.from("orders").insert({user_id:e.id,total_amount:s,customer_name:v.name,customer_phone:v.phone,customer_address:v.address,status:"pending"}).select().single();if(r){let n=a.map(e=>{var t;return{order_id:r.id,product_id:e.product_id,quantity:e.quantity,price:(null==(t=e.product)?void 0:t.price)||0}});await f.from("order_items").insert(n),await f.from("cart_items").delete().eq("user_id",e.id);let l=a.map(e=>{var t,a;return"• ".concat(null==(t=e.product)?void 0:t.name," - Qty: ").concat(e.quantity," - ₹").concat((((null==(a=e.product)?void 0:a.price)||0)*e.quantity).toLocaleString())}).join("\n"),i="\uD83D\uDE4F *New Order from Kanha Collection* \uD83D\uDE4F\n\n*Customer Details:*\nName: ".concat(v.name,"\nPhone: ").concat(v.phone,"\nAddress: ").concat(v.address,"\n\n*Order Items:*\n").concat(l,"\n\n*Total Amount: ₹").concat(s.toLocaleString(),"*\n\nPlease confirm the order. \uD83D\uDD49️"),d="https://wa.me/918544737965?text=".concat(encodeURIComponent(i));window.open(d,"_blank"),t.push("/orders")}},k=a.reduce((e,t)=>{var a;return e+((null==(a=t.product)?void 0:a.price)||0)*t.quantity},0);return x?(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,s.jsx)("div",{className:"container mx-auto px-4",children:(0,s.jsxs)("div",{className:"text-center py-16",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-500 mx-auto"}),(0,s.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading cart..."})]})})}):0===a.length?(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,s.jsx)("div",{className:"container mx-auto px-4",children:(0,s.jsxs)("div",{className:"text-center py-16",children:[(0,s.jsx)(d,{className:"w-24 h-24 text-gray-400 mx-auto mb-6"}),(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-600 mb-4",children:"Your cart is empty"}),(0,s.jsx)("p",{className:"text-gray-500 mb-8",children:"Add some divine products to get started"}),(0,s.jsx)("a",{href:"/products",className:"bg-gradient-to-r from-orange-500 to-yellow-500 text-white px-8 py-3 rounded-full hover:from-orange-600 hover:to-yellow-600 transition-all duration-300 font-semibold",children:"Continue Shopping"})]})})}):(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,s.jsxs)("div",{className:"container mx-auto px-4",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-800 mb-8",children:"Shopping Cart"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,s.jsx)("div",{className:"lg:col-span-2",children:(0,s.jsx)("div",{className:"bg-white rounded-xl shadow-md p-6",children:a.map(e=>{var t,a,r,n,i;return(0,s.jsxs)("div",{className:"flex items-center py-6 border-b border-gray-200 last:border-b-0",children:[(0,s.jsx)(l.default,{src:(null==(t=e.product)?void 0:t.image)||"",alt:(null==(a=e.product)?void 0:a.name)||"",width:80,height:80,className:"w-20 h-20 object-cover rounded-lg"}),(0,s.jsxs)("div",{className:"flex-1 ml-6",children:[(0,s.jsx)("h3",{className:"font-semibold text-lg text-gray-800",children:null==(r=e.product)?void 0:r.name}),(0,s.jsx)("p",{className:"text-gray-600 text-sm",children:null==(n=e.product)?void 0:n.description}),(0,s.jsxs)("p",{className:"text-orange-600 font-bold text-lg",children:["₹",null==(i=e.product)?void 0:i.price.toLocaleString()]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("button",{onClick:()=>j(e.id,e.quantity-1),className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:(0,s.jsx)(o,{className:"w-4 h-4"})}),(0,s.jsx)("span",{className:"font-semibold text-lg w-8 text-center",children:e.quantity}),(0,s.jsx)("button",{onClick:()=>j(e.id,e.quantity+1),className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:(0,s.jsx)(c,{className:"w-4 h-4"})}),(0,s.jsx)("button",{onClick:()=>N(e.id),className:"p-2 hover:bg-red-100 text-red-500 rounded-full transition-colors ml-4",children:(0,s.jsx)(u.A,{className:"w-4 h-4"})})]})]},e.id)})})}),(0,s.jsx)("div",{className:"lg:col-span-1",children:(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6 sticky top-8",children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-gray-800 mb-6",children:"Order Summary"}),(0,s.jsx)("div",{className:"space-y-4 mb-6",children:a.map(e=>{var t,a;return(0,s.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,s.jsxs)("span",{children:[null==(t=e.product)?void 0:t.name," x ",e.quantity]}),(0,s.jsxs)("span",{children:["₹",(((null==(a=e.product)?void 0:a.price)||0)*e.quantity).toLocaleString()]})]},e.id)})}),(0,s.jsx)("div",{className:"border-t pt-4 mb-6",children:(0,s.jsxs)("div",{className:"flex justify-between text-lg font-bold",children:[(0,s.jsx)("span",{children:"Total:"}),(0,s.jsxs)("span",{className:"text-orange-600",children:["₹",k.toLocaleString()]})]})}),(0,s.jsxs)("div",{className:"space-y-4 mb-6",children:[(0,s.jsx)("h3",{className:"font-semibold text-gray-800",children:"Customer Information"}),(0,s.jsx)("input",{type:"text",placeholder:"Full Name",value:v.name,onChange:e=>y({...v,name:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"}),(0,s.jsx)("input",{type:"tel",placeholder:"Phone Number",value:v.phone,onChange:e=>y({...v,phone:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"}),(0,s.jsx)("textarea",{placeholder:"Delivery Address",value:v.address,onChange:e=>y({...v,address:e.target.value}),rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent resize-none"})]}),(0,s.jsxs)("button",{onClick:w,className:"w-full bg-green-500 text-white py-3 px-4 rounded-lg hover:bg-green-600 transition-colors flex items-center justify-center space-x-2 font-semibold",children:[(0,s.jsx)(m,{className:"w-5 h-5"}),(0,s.jsx)("span",{children:"Order via WhatsApp"})]})]})})]})]})})}},6910:(e,t,a)=>{"use strict";a.d(t,{S:()=>n});var s=a(5040),r=a(8760);(0,s.UU)("https://ifpvypovzipupnjjeois.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImlmcHZ5cG92emlwdXBuamplb2lzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTg2OTQ3OTgsImV4cCI6MjA3NDI3MDc5OH0.3maRUIRxrWDEkl6NmH0sRRT7SdxaZAc449UkZhon9FU");let n=()=>(0,r.createClientComponentClient)()},7629:(e,t,a)=>{Promise.resolve().then(a.bind(a,2710))},8839:(e,t,a)=>{"use strict";a.d(t,{A:()=>d,Providers:()=>i});var s=a(5155),r=a(2115),n=a(6910);let l=(0,r.createContext)(void 0);function i(e){let{children:t}=e,[a,i]=(0,r.useState)(null),[d,o]=(0,r.useState)(null),[c,u]=(0,r.useState)(!0),m=(0,n.S)(),h=async()=>{if(!a)return;let{data:e}=await m.from("profiles").select("*").eq("id",a.id).single();e&&o(e)};(0,r.useEffect)(()=>{(async()=>{let{data:{user:e}}=await m.auth.getUser();i(e),e&&await h(),u(!1)})();let{data:{subscription:e}}=m.auth.onAuthStateChange(async(e,t)=>{var a;i(null!=(a=null==t?void 0:t.user)?a:null),(null==t?void 0:t.user)?await h():o(null),u(!1)});return()=>e.unsubscribe()},[]);let p=async()=>{await m.auth.signOut(),i(null),o(null)};return(0,s.jsx)(l.Provider,{value:{user:a,profile:d,loading:c,signOut:p,refreshProfile:h},children:t})}let d=()=>{let e=(0,r.useContext)(l);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}}},e=>{e.O(0,[760,946,441,255,358],()=>e(e.s=7629)),_N_E=e.O()}]);