(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[897],{63:(e,a,t)=>{"use strict";var r=t(7260);t.o(r,"usePathname")&&t.d(a,{usePathname:function(){return r.usePathname}}),t.o(r,"useRouter")&&t.d(a,{useRouter:function(){return r.useRouter}})},508:(e,a,t)=>{"use strict";t.d(a,{A:()=>r});let r=(0,t(5105).A)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},3234:(e,a,t)=>{Promise.resolve().then(t.bind(t,8304))},3664:(e,a,t)=>{"use strict";t.d(a,{A:()=>r});let r=(0,t(5105).A)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},5105:(e,a,t)=>{"use strict";t.d(a,{A:()=>l});var r=t(2115),s={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let l=(e,a)=>{let t=(0,r.forwardRef)((t,l)=>{let{color:n="currentColor",size:i=24,strokeWidth:o=2,absoluteStrokeWidth:d,className:c="",children:u,...m}=t;return(0,r.createElement)("svg",{ref:l,...s,width:i,height:i,stroke:n,strokeWidth:d?24*Number(o)/Number(i):o,className:["lucide","lucide-".concat(e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim()),c].join(" "),...m},[...a.map(e=>{let[a,t]=e;return(0,r.createElement)(a,t)}),...Array.isArray(u)?u:[u]])});return t.displayName="".concat(e),t}},6046:(e,a,t)=>{"use strict";t.d(a,{A:()=>r});let r=(0,t(5105).A)("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]])},6910:(e,a,t)=>{"use strict";t.d(a,{S:()=>l});var r=t(5040),s=t(8760);(0,r.UU)("https://ifpvypovzipupnjjeois.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImlmcHZ5cG92emlwdXBuamplb2lzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTg2OTQ3OTgsImV4cCI6MjA3NDI3MDc5OH0.3maRUIRxrWDEkl6NmH0sRRT7SdxaZAc449UkZhon9FU");let l=()=>(0,s.createClientComponentClient)()},8304:(e,a,t)=>{"use strict";t.d(a,{default:()=>p});var r=t(5155),s=t(2115),l=t(63),n=t(508),i=t(3664),o=t(5105);let d=(0,o.A)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),c=(0,o.A)("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);var u=t(6046),m=t(8839),h=t(6910);function p(){let{user:e,profile:a,refreshProfile:t}=(0,m.A)(),o=(0,l.useRouter)(),[p,x]=(0,s.useState)(!1),[f,g]=(0,s.useState)({full_name:"",phone:"",address:""}),y=(0,h.S)();(0,s.useEffect)(()=>{if(!e)return void o.push("/auth");a&&g({full_name:a.full_name||"",phone:a.phone||"",address:a.address||""})},[e,a]);let b=async a=>{if(a.preventDefault(),e){x(!0);try{let{error:a}=await y.from("profiles").update({full_name:f.full_name,phone:f.phone,address:f.address,updated_at:new Date().toISOString()}).eq("id",e.id);if(a)throw a;await t(),alert("Profile updated successfully!")}catch(e){console.error("Error updating profile:",e),alert("Error updating profile")}finally{x(!1)}}};return e&&a?(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,r.jsx)("div",{className:"container mx-auto px-4",children:(0,r.jsx)("div",{className:"max-w-2xl mx-auto",children:(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-8",children:[(0,r.jsxs)("div",{className:"text-center mb-8",children:[(0,r.jsx)("div",{className:"w-20 h-20 bg-gradient-to-r from-orange-500 to-yellow-500 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,r.jsx)(n.A,{className:"w-10 h-10 text-white"})}),(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:"My Profile"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Manage your account information"})]}),(0,r.jsxs)("form",{onSubmit:b,className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(i.A,{className:"w-5 h-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,r.jsx)("input",{type:"email",value:a.email,disabled:!0,className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg bg-gray-50 text-gray-500"})]}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Email cannot be changed"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(n.A,{className:"w-5 h-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,r.jsx)("input",{type:"text",value:f.full_name,onChange:e=>g({...f,full_name:e.target.value}),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"Enter your full name"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(d,{className:"w-5 h-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,r.jsx)("input",{type:"tel",value:f.phone,onChange:e=>g({...f,phone:e.target.value}),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"Enter your phone number"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Address"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(c,{className:"w-5 h-5 absolute left-3 top-3 text-gray-400"}),(0,r.jsx)("textarea",{value:f.address,onChange:e=>g({...f,address:e.target.value}),rows:3,className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent resize-none",placeholder:"Enter your address"})]})]}),(0,r.jsxs)("button",{type:"submit",disabled:p,className:"w-full bg-gradient-to-r from-orange-500 to-yellow-500 text-white py-3 px-4 rounded-lg hover:from-orange-600 hover:to-yellow-600 transition-all duration-300 font-semibold disabled:opacity-50 flex items-center justify-center space-x-2",children:[(0,r.jsx)(u.A,{className:"w-5 h-5"}),(0,r.jsx)("span",{children:p?"Saving...":"Save Changes"})]})]}),a.is_admin&&(0,r.jsxs)("div",{className:"mt-8 p-4 bg-orange-50 rounded-lg border border-orange-200",children:[(0,r.jsx)("p",{className:"text-orange-800 font-semibold",children:"Admin Account"}),(0,r.jsx)("p",{className:"text-orange-600 text-sm",children:"You have administrative privileges"})]})]})})})}):(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,r.jsx)("div",{className:"container mx-auto px-4",children:(0,r.jsxs)("div",{className:"text-center py-16",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-500 mx-auto"}),(0,r.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading profile..."})]})})})}},8839:(e,a,t)=>{"use strict";t.d(a,{A:()=>o,Providers:()=>i});var r=t(5155),s=t(2115),l=t(6910);let n=(0,s.createContext)(void 0);function i(e){let{children:a}=e,[t,i]=(0,s.useState)(null),[o,d]=(0,s.useState)(null),[c,u]=(0,s.useState)(!0),m=(0,l.S)(),h=async()=>{if(!t)return;let{data:e}=await m.from("profiles").select("*").eq("id",t.id).single();e&&d(e)};(0,s.useEffect)(()=>{(async()=>{let{data:{user:e}}=await m.auth.getUser();i(e),e&&await h(),u(!1)})();let{data:{subscription:e}}=m.auth.onAuthStateChange(async(e,a)=>{var t;i(null!=(t=null==a?void 0:a.user)?t:null),(null==a?void 0:a.user)?await h():d(null),u(!1)});return()=>e.unsubscribe()},[]);let p=async()=>{await m.auth.signOut(),i(null),d(null)};return(0,r.jsx)(n.Provider,{value:{user:t,profile:o,loading:c,signOut:p,refreshProfile:h},children:a})}let o=()=>{let e=(0,s.useContext)(n);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}}},e=>{e.O(0,[760,441,255,358],()=>e(e.s=3234)),_N_E=e.O()}]);